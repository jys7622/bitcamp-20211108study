<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8" />
    <title>내 책장</title>
  </head>
  <body>
    <h1>내 책장</h1>
    <a href="form.html">Book Diary</a>
    <table id="x-board-table" border="1">
      <thead>
        <tr>
          <th>제목</th>
          <th>작가</th>
          <th>출판사</th>
          <th>페이지</th>
          <th>가격</th>
          <th>읽은 날짜</th>
          <th>독후감</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>

    <script type="text/javascript">
      var tbody = document.querySelector('#x-board-table tbody');

      fetch('/book/list')
        .then(function (response) {
          console.log(response);
          return response.json();
        })
        .then(function (books) {
          console.log(books);
          for (var i = 0; i < books.length; i++) {
            var book = books[i];
            var tr = document.createElement('tr');
            tr.innerHTML = `<td><a href="view.html?index=${i}">${book.title}</a></td>
        <td>${book.author}</td>
        <td>${book.press}</td>
        <td>${book.page}</td>
        <td>${book.price}</td>
        <td>${book.readDate}</td>
        <td>${book.feed}</td>`;
            tbody.appendChild(tr);
          }
        });
    </script>
  </body>
</html>
